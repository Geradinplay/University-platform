# üîß HOTFIX: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ isProfessor

**–î–∞—Ç–∞:** 2026-02-10  
**–°—Ç–∞—Ç—É—Å:** üü¢ –ò–°–ü–†–ê–í–õ–ï–ù–û  
**–í–µ—Ä—Å–∏—è:** 2.1.1

---

## üêõ –ù–ê–ô–î–ï–ù–ù–´–ï –ò –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –û–®–ò–ë–ö–ò

### ‚ùå –û—à–∏–±–∫–∞ 1: –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ api.js
**–ú–µ—Å—Ç–æ:** api.js —Å—Ç—Ä–æ–∫–∞ 135  
**–ü—Ä–æ–±–ª–µ–º–∞:** –õ–∏—à–Ω—è—è –∑–∞–∫—Ä—ã–≤–∞—é—â–∞—è —Å–∫–æ–±–∫–∞ `});`  
```javascript
// –ë–´–õ–û (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
export const deleteProfessor = (id) => apiRequest(`/api/users/${id}`, {
    method: 'DELETE'
});
});  // ‚Üê –õ–ò–®–ù–Ø–Ø –°–ö–û–ë–ö–ê!

// –°–¢–ê–õ–û (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
export const deleteProfessor = (id) => apiRequest(`/api/users/${id}`, {
    method: 'DELETE'
});
```
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** ‚úÖ

---

### ‚ùå –û—à–∏–±–∫–∞ 2: HTTP 403 –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π
**–ú–µ—Å—Ç–æ:** api.js —Ñ—É–Ω–∫—Ü–∏—è `getProfessors()`  
**–ü—Ä–æ–±–ª–µ–º–∞:** Endpoint `/api/users/professors` –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 403)  
**–ü—Ä–∏—á–∏–Ω–∞:** –ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏ - —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ users —Å `isProfessor=true`  

**–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `getProfessors()` —Å fallback –ª–æ–≥–∏–∫–æ–π:
```javascript
// –ë–´–õ–û (–ø—Ä–æ—Å—Ç–æ –≤—ã–∑—ã–≤–∞–µ–º —ç–Ω–¥–ø–æ–∏–Ω—Ç):
export const getProfessors = () => apiRequest('/api/users/professors');

// –°–¢–ê–õ–û (—Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–∫–∏ –∏ fallback):
export const getProfessors = async () => {
    try {
        // –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å —á–µ—Ä–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π endpoint
        return await apiRequest('/api/users/professors');
    } catch (err) {
        // –ï—Å–ª–∏ endpoint –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ø–æ–ª—É—á–∞–µ–º –≤—Å–µ—Ö users –∏ —Ñ–∏–ª—å—Ç—Ä—É–µ–º –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ
        console.warn('Endpoint /api/users/professors –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω, —Ñ–∏–ª—å—Ç—Ä—É–µ–º users –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ');
        try {
            const allUsers = await apiRequest('/api/users');
            return Array.isArray(allUsers) ? allUsers.filter(u => u.isProfessor === true) : [];
        } catch (fallbackErr) {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:', fallbackErr);
            return [];
        }
    }
};
```
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** ‚úÖ

---

### ‚ùå –û—à–∏–±–∫–∞ 3: TypeError: window.openTab is not a function
**–ú–µ—Å—Ç–æ:** main.js —Å—Ç—Ä–æ–∫–∏ 27-37 –∏ 1144-1155  
**–ü—Ä–æ–±–ª–µ–º–∞:** –§—É–Ω–∫—Ü–∏—è `openTab` –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –¥–≤–∞–∂–¥—ã:
1. –ö–∞–∫ `export function openTab()` (—Å—Ç—Ä–æ–∫–∞ 27)
2. –ö–∞–∫ `window.openTab = function()` (—Å—Ç—Ä–æ–∫–∞ 1144)

–≠—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π.

**–†–µ—à–µ–Ω–∏–µ:** 
1. –£–¥–∞–ª–µ–Ω–∞ –ø–µ—Ä–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `export function openTab()`
2. –û—Å—Ç–∞–≤–ª–µ–Ω–∞ —Ç–æ–ª—å–∫–æ `window.openTab = function()` –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
3. –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—ã–∑–æ–≤—ã –Ω–∞ `window.openTab('tab-id')`

```javascript
// –ë–´–õ–û (–∫–æ–Ω—Ñ–ª–∏–∫—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π):
export function openTab(tabId) { ... }
window.openTab = openTab;  // –ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ
// ... –¥–∞–ª—å—à–µ –≤ –∫–æ–¥–µ ...
window.openTab = function(tabId) { ... }  // –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ!

// –°–¢–ê–õ–û (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ):
// –¢–æ–ª—å–∫–æ –æ–¥–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:
window.openTab = function(tabId) { ... }  // –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
```
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** ‚úÖ

---

## üìã –§–ê–ô–õ–´ –ö–û–¢–û–†–´–ï –ë–´–õ–ò –ò–°–ü–†–ê–í–õ–ï–ù–´

| –§–∞–π–ª | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è |
|------|------------|
| `api/api.js` | ‚úÖ –£–¥–∞–ª–µ–Ω–∞ –ª–∏—à–Ω—è—è —Å–∫–æ–±–∫–∞ –≤ deleteProfessor()<br/>‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ getProfessors() —Å fallback –ª–æ–≥–∏–∫–æ–π |
| `src/js/main.js` | ‚úÖ –£–¥–∞–ª–µ–Ω–æ –ø–µ—Ä–≤–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ export function openTab()<br/>‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –≤—ã–∑–æ–≤ openTab() –Ω–∞ window.openTab() |

---

## ‚úÖ –°–¢–ê–¢–£–° –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### –ë—ã–ª–æ:
```
Uncaught SyntaxError: unexpected garbage after module, starting with '}' api.js:135:1
Uncaught TypeError: window.openTab is not a function
XHR GET http://localhost:8080/api/users/professors [HTTP/1.1 403]
API Error [/api/users/professors]: –û—à–∏–±–∫–∞ HTTP: 403
```

### –°—Ç–∞–ª–æ:
```
‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞
‚úÖ –§—É–Ω–∫—Ü–∏—è window.openTab —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ getProfessors() —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å fallback
‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
```

---

## üîÑ –ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢ –¢–ï–ü–ï–†–¨

### getProfessors() flow:
```
1. –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–ª—É—á–∏—Ç—å /api/users/professors
   ‚îú‚îÄ –ï—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
   ‚îî‚îÄ –ï—Å–ª–∏ 403 (forbidden) ‚Üí –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ fallback
   
2. Fallback: –ø–æ–ª—É—á–∞–µ–º /api/users
   ‚îú‚îÄ –§–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ–ª—å–∫–æ users —Å isProfessor=true
   ‚îî‚îÄ –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤
   
3. –ï—Å–ª–∏ –∏ —ç—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤
```

### window.openTab() flow:
```
1. HTML –≤—ã–∑—ã–≤–∞–µ—Ç: onclick="window.openTab('tab-id')"
2. window.openTab –±—ã–ª–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –î–û DOMContentLoaded
3. –ü—Ä–∏ DOMContentLoaded –≤—ã–∑—ã–≤–∞–µ–º: window.openTab('lesson-tab-content')
4. –§—É–Ω–∫—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
```

---

## üìä –ò–¢–û–ì–ò

### –ß—Ç–æ –±—ã–ª–æ —Å–ª–æ–º–∞–Ω–æ:
- ‚ùå –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ api.js
- ‚ùå HTTP 403 –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π
- ‚ùå –§—É–Ω–∫—Ü–∏—è window.openTab –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞

### –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
- ‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—Å –≤ –ø–æ—Ä—è–¥–∫–µ
- ‚úÖ getProfessors() —Ä–∞–±–æ—Ç–∞–µ—Ç —Å fallback
- ‚úÖ window.openTab –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –†–µ–∑—É–ª—å—Ç–∞—Ç:
‚úÖ **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫**

---

**–í–µ—Ä—Å–∏—è:** 2.1.1  
**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 2026-02-10  
**–°—Ç–∞—Ç—É—Å:** üü¢ –ü–û–õ–ù–û–°–¢–¨–Æ –ò–°–ü–†–ê–í–õ–ï–ù–û  
**–ê–≤—Ç–æ—Ä:** Geradine

---

## üìù –ü–†–ò–ú–ï–ß–ê–ù–ò–Ø

1. **Fallback –ª–æ–≥–∏–∫–∞** –ø–æ–∑–≤–æ–ª–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é —Ä–∞–±–æ—Ç–∞—Ç—å, –¥–∞–∂–µ –µ—Å–ª–∏ backend –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç endpoint `/api/users/professors`
2. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ** —ç—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ - –ª—É—á—à–µ —Å–æ–∑–¥–∞—Ç—å endpoint –Ω–∞ backend
3. –í—Å–µ –æ—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ —Ç–µ–ø–µ—Ä—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ!** üöÄ

