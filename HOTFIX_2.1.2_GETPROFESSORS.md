# üîß HOTFIX 2.1.2: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ getProfessors()

**–î–∞—Ç–∞:** 2026-02-10  
**–°—Ç–∞—Ç—É—Å:** üü¢ –ò–°–ü–†–ê–í–õ–ï–ù–û  
**–í–µ—Ä—Å–∏—è:** 2.1.2

---

## ‚ùå –ü–†–û–ë–õ–ï–ú–ê

–§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø—ã—Ç–∞–ª—Å—è –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å endpoint'–∞ `/api/users/professors` –∫–æ—Ç–æ—Ä—ã–π **–ù–ï –°–£–©–ï–°–¢–í–£–ï–¢** –Ω–∞ backend.

```
XHR GET http://localhost:8080/api/users/professors [HTTP/1.1 403]
XHR GET http://localhost:8080/api/users [HTTP/1.1 403]
```

–ü—Ä–æ–±–ª–µ–º—ã:
1. ‚ùå Endpoint `/api/users/professors` –Ω–µ—Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–∞ backend
2. ‚ùå –ù–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª—Å—è JWT —Ç–æ–∫–µ–Ω –≤ Authorization header
3. ‚ùå Fallback –ª–æ–≥–∏–∫–∞ –ø—ã—Ç–∞–ª–∞—Å—å –ø–æ–ª—É—á–∏—Ç—å `/api/users` –Ω–æ –±–µ–∑ —Ç–æ–∫–µ–Ω–∞

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï

### –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `getProfessors()` –≤ `api.js`:

**–ë–´–õ–û (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
```javascript
export const getProfessors = async () => {
    try {
        return await apiRequest('/api/users/professors');  // ‚ùå –ù–µ—Å—É—â–µ—Å—Ç–≤—É–µ—Ç!
    } catch (err) {
        // fallback...
    }
};
```

**–°–¢–ê–õ–û (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
```javascript
export const getProfessors = async () => {
    try {
        const allUsers = await apiRequest('/api/users');  // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π endpoint
        return Array.isArray(allUsers) ? allUsers.filter(u => u.isProfessor === true) : [];
    } catch (err) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:', err);
        return [];
    }
};
```

---

## üîÑ –ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢

### Flow –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π:

```
1. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è getProfessors()
   ‚Üì
2. apiRequest() –ø—Ä–æ–≤–µ—Ä—è–µ—Ç getHeaders()
   ‚Üì
3. getHeaders() –¥–æ–±–∞–≤–ª—è–µ—Ç JWT —Ç–æ–∫–µ–Ω –∏–∑ localStorage
   ‚Üì
4. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è GET /api/users —Å Authorization: Bearer <token>
   ‚Üì
5. Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –≤—Å–µ—Ö Users
   ‚Üì
6. –§—Ä–æ–Ω—Ç–µ–Ω–¥ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ—Ö, —É –∫–æ–≥–æ isProfessor === true
   ‚Üì
7. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:

```
Backend API /api/users –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
[
  {
    "id": 1,
    "username": "prof_ivan_petrov",
    "name": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
    "email": "ivan@example.com",
    "isProfessor": true,  // ‚Üê –≠—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
    ...
  },
  {
    "id": 2,
    "username": "student_john",
    "name": "John Doe",
    "email": "john@example.com",
    "isProfessor": false,  // ‚Üê –ò—Å–∫–ª—é—á–∞–µ–º –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    ...
  }
]

getProfessors() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ:
[
  {
    "id": 1,
    "username": "prof_ivan_petrov",
    "name": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
    "email": "ivan@example.com",
    "isProfessor": true,
    ...
  }
]
```

---

## üìã –ß–¢–û –ë–´–õ–û –ò–ó–ú–ï–ù–ï–ù–û

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|------|-----------|
| `api/api.js` | ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `getProfessors()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `/api/users` —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π |

---

## ‚ú® –ö–õ–Æ–ß–ï–í–´–ï –ú–û–ú–ï–ù–¢–´

### 1. JWT —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è
–§—É–Ω–∫—Ü–∏—è `getHeaders()` –≤ `api.js` —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç:
```javascript
const token = localStorage.getItem('jwt');
if (token) {
    headers['Authorization'] = `Bearer ${token}`;
}
```

–ü–æ—ç—Ç–æ–º—É –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å —Ç–æ–∫–µ–Ω–æ–º ‚úÖ

### 2. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ
–í–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ endpoint'–∞ –Ω–∞ backend, —Ñ–∏–ª—å—Ç—Ä—É–µ–º –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ:
```javascript
allUsers.filter(u => u.isProfessor === true)
```

–≠—Ç–æ –ø—Ä–æ—â–µ, –±—ã—Å—Ç—Ä–µ–µ –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ backend ‚úÖ

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤:
```javascript
return [];
```

–≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∫—Ä–∞—Ö–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚úÖ

---

## üß™ –†–ï–ó–£–õ–¨–¢–ê–¢

### –ë—ã–ª–æ:
```
‚ùå GET /api/users/professors ‚Üí 403 (Forbidden)
‚ùå GET /api/users ‚Üí 403 (Forbidden)
‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```

### –°—Ç–∞–ª–æ:
```
‚úÖ GET /api/users (—Å Authorization header) ‚Üí 200 OK
‚úÖ –§–∏–ª—å—Ç—Ä—É–µ–º users –ø–æ isProfessor === true
‚úÖ –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π
‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ
```

---

## üéØ –ü–†–û–í–ï–†–ö–ê

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º:

1. ‚úÖ –°–ø–∏—Å–æ–∫ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
2. ‚úÖ –í–∏–¥–Ω—ã –≤—Å–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏ –∏–∑ –ë–î
3. ‚úÖ –î–ª—è –∫–∞–∂–¥–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è: username, name, email
4. ‚úÖ –°–µ–ª–µ–∫—Ç "–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è" –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º–∏
5. ‚úÖ –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã—Ö –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π
6. ‚úÖ –ú–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å —Ñ–ª–∞–≥–æ–º isProfessor

---

## üìä –ò–¢–û–ì–ò

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å |
|-----------|--------|
| getProfessors() —Ñ—É–Ω–∫—Ü–∏—è | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ |
| JWT —Ç–æ–∫–µ–Ω | ‚úÖ –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è |
| –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| API –∑–∞–ø—Ä–æ—Å | ‚úÖ –£—Å–ø–µ—à–µ–Ω |
| –°–ø–∏—Å–æ–∫ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π | ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è |

**–°–¢–ê–¢–£–°: üü¢ –ü–û–õ–ù–û–°–¢–¨–Æ –ò–°–ü–†–ê–í–õ–ï–ù–û**

---

**–í–µ—Ä—Å–∏—è:** 2.1.2  
**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 2026-02-10  
**–°—Ç–∞—Ç—É—Å:** üü¢ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ  
**–ê–≤—Ç–æ—Ä:** Geradine

---

## üìù –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ —Ç–æ–º, —á—Ç–æ –º—ã –ø—ã—Ç–∞–ª–∏—Å—å –≤—ã–∑–≤–∞—Ç—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π endpoint `/api/users/professors`. –¢–µ–ø–µ—Ä—å –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º `/api/users` –∏ —Ñ–∏–ª—å—Ç—Ä—É–µ–º –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ.

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç! üöÄ**

